{% extends 'blog/base.html' %}
{% block title %}
Charramma的个人博客
{% endblock %}

{% block left %}
{% if page_obj %}
<!-- 博客列表 -->
{% for post in page_obj %}
<div class="box">
    <h1 class="is-size-5  has-text-weight-bold"><a href="{% url 'blog:post_detail' post.id %}">{{ post.title }}</a></h1>
    <div class="is-size-7 has-text-grey-light pt-1 pb-1">
        <span>发布日期：{{ post.add_date }}</span>
    </div>
    <!-- 显示博客描述 -->
    <!-- truncatechars 控制文章描述显示字数，只显示50个字节 -->
    <p class="mt-3 is-size-6">&nbsp;&nbsp;{{ post.desc|truncatechars:50 }}</p>
</div>
{% endfor %}
<!-- 分页按钮 -->
<nav class="pagination is-rounded" role="navigation" aria-label="pagination">
    <!-- 如果存在上一页 -->
    {% if page_obj.has_previous %}
    <a class="pagination-previous" href="?page={{ page_obj.previous_page_number }}"><span
            class="iconfont icon-angle-double-left"></span></a>
    {% endif %}
    <!-- 如果存在下一页 -->
    {% if page_obj.has_next %}
    <a class="pagination-next" href="?page={{ page_obj.next_page_number }}"><span
            class="iconfont icon-angle-double-right"></span></a>
    {% endif %}
    <!-- 如果只有一页，不显示页码 -->
    {% if page_obj.paginator.num_pages > 1 %}
    <ul class="pagination-list">
        {% if page_obj.has_previous %}
        <li><a class="pagination-link" href="?page={{ page_obj.previous_page_number }}"
                aria-label="Goto page {{ page_obj.previous_page_number }}">{{ page_obj.previous_page_number }}</a>
        </li>
        {% endif %}
        <li><a class="pagination-link is-current" aria-label="Page {{ page_obj.number }}" aria-current="page"
                href='?page={{ page_obj.number }}'>{{ page_obj.number }}</a>
        </li>
        {% if page_obj.has_next %}
        <li><a class="pagination-link" href="?page={{ page_obj.next_page_number }}"
                aria-label="Goto page {{ page_obj.next_page_number }}">{{ page_obj.next_page_number }}</a>
        </li>
        {% endif %}
    </ul>
    {% endif %}
</nav>
{% else %}
<div class="box">
    <p class="mt-3 is-size-6">没有相关文章...</p>
</div>
{% endif %}

{% endblock %}